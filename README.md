Auto Manifest ![CI](https://github.com/GradleUp/auto-manifest/workflows/CI/badge.svg)
=============

Android projects set up via Gradle build system. `AndroidManifest.xml` file is crucial to define Android specific
 properties like `minSdkVersion`, `uses-permission` etc. Some of are defined through `build.gradle` and AGP (Android
  Gradle Plugin) merges them automatically.
  
Unfortunately, `package` property must be defined in `AndroidManifest.xml` and mandatory for `BuildConfig` and `R
` class generation. In most of my Gradle modules, `AndroidManifest.xml` is just 1 line:
```xml
<manifest package="foo" />
```

Here comes AutoManifest Gradle Plugin to rescue ðŸš€

Configuration
-------------

[ ![Bintray](https://img.shields.io/bintray/v/gradleup/maven/auto-manifest) ](https://bintray.com/gradleup/maven/auto-manifest/_latestVersion)
[ ![Gradle Plugin Portal](https://img.shields.io/maven-metadata/v/https/plugins.gradle.org/m2/com/gradleup/auto/manifest/com.gradleup.auto.manifest/maven-metadata.xml.svg?label=Gradle%20Plugins%20Portal) ](https://plugins.gradle.org/plugin/com.gradleup.auto.manifest)

Add the plugin in your `build.gradle` file (preferably in root one)

<details open><summary>Kotlin</summary>

```kotlin
plugins {
    id("com.gradleup.auto.manifest") version "<latest-version>"
}

autoManifest {
    // Mandatory packageName
    packageName.set("com.company.example")

    // Applies recursively to sub-modules so you don't have to
    // Sub-module package names will be auto generated by using their relative path
    // Default: true
    applyRecursively.set(true)
    
    // Using dashes `-` is pretty common in module names. But they are not allowed within Java package names.
    // When this flag is enabled, they will be replaced by a dot. By default, they will be replaced with an underscore.
    // Default: false
    replaceDashesWithDot.set(true)
}
```
</details>

<details><summary>Groovy</summary>

```kotlin
plugins {
    id 'com.gradleup.auto.manifest' version '<latest-version>'
}

autoManifest {
    // Mandatory packageName
    packageName = 'com.company.example'

    // Applies recursively to sub-modules so you don't have to
    // Sub-module package names will be auto generated by using their relative path
    // Default: true
    applyRecursively = true
    
    // Using dashes `-` is pretty common in module names. But they are not allowed within Java package names.
    // When this flag is enabled, they will be replaced by a dot. By default, they will be replaced with an underscore.
    // Default: false
    replaceDashesWithDot = true
}
```
</details>

Ta-da ðŸŽ‰ Now just put your Java/Kotlin files and don't worry about the rest.

Performance
-----------

This project uses Gradle's [Lazy Task Configuration APIs][lazy] and do not cause eager task creation in AGP. It also
 generates the `AndroidManifest.xml` file lazily. That means "zero" impact on Android Studio Sync times. 

Sample App
----------

Checkout the sample app with multi-modules where only the Application module defines `AndroidManifest.xml` - available
 [here][sample]

In Action
---------

Here is the first integration into one of my apps:  https://github.com/tasomaniac/OpenLinkWith/commit/5b4029e922c33816fde67400e6c1ac40e015c9b9

Plugin is added in couple of lines and many `AndroidManifest.xml` files are removed. ðŸŽ‰

[lazy]: https://docs.gradle.org/current/userguide/task_configuration_avoidance.html
[sample]: https://github.com/GradleUp/auto-manifest/tree/master/sample
